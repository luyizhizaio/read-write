<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="UserInfo">
	
	<typeAlias alias="userInfo" type="com.uuzz.los.entity.UserInfo" />

	<resultMap class="userInfo" id="userInfoResult">
		<result property="userId" column="user_id"/>
		<result property="username" column="user_name"/>
		<result property="mobile" column="mobile"/>
	</resultMap>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="commonColumns">
	    <![CDATA[
        	user_id ,user_name ,mobile
	    ]]>
	</sql>
	
	<sql id="propertyEquals">
		<isNotEmpty prepend="AND" property="user_id">
			user_id = #user_id#	
		</isNotEmpty>
	</sql>
	
	<sql id="dynamicWhere">
		<dynamic prepend=" WHERE ">
			<include refid="propertyEquals" />
		</dynamic>
	</sql>
	
	<select id="queryAll"  parameterClass="userInfo" resultMap="userInfoResult">
	
		SELECT
		<include refid="commonColumns" />
		<![CDATA[
	    	FROM user_info
		]]>
	</select>
	
	<insert id="insert" parameterClass="userInfo">
	
	    <![CDATA[
	    	INSERT INTO 
			 user_info 
			 ]]>
			 <dynamic prepend="(" >
			 	<isNotEmpty prepend="," property="userId">USER_ID</isNotEmpty>
			 	<isNotEmpty prepend="," property="username">USER_NAME</isNotEmpty>
			 	<isNotEmpty prepend="," property="mobile">MOBILE</isNotEmpty>
			 )</dynamic>
			 VALUES 
			 <dynamic prepend="(" >
			 <isNotEmpty prepend="," property="userId">#userId#</isNotEmpty>
			 <isNotEmpty prepend="," property="username">#userName#</isNotEmpty>
			 <isNotEmpty prepend="," property="mobile">#mobile#</isNotEmpty>
	    	)</dynamic>    
	</insert>
	
</sqlMap>

